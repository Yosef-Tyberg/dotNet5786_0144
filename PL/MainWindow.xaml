﻿<Window x:Class="PL.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:PL"
        Title="Management Console"
        Height="700"
        Width="1000"
        DataContext="{Binding RelativeSource={RelativeSource Mode=Self}}">

    <Window.Resources>
        <!-- Converters -->
        <local:DateTimeToStringConverter x:Key="DateTimeToStringConverter"/>
        <local:TimeSpanToStringConverter x:Key="TimeSpanToStringConverter"/>
        <local:NullableDoubleConverter x:Key="NullableDoubleConverter"/>
    </Window.Resources>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Title -->
        <TextBlock Grid.Row="0"
                   Text="Delivery Management System"
                   FontSize="26"
                   FontWeight="Bold"
                   HorizontalAlignment="Center"
                   Margin="0,0,0,15"/>

        <!-- System Clock Area -->
        <!-- Displays current simulated time and allows advancing it -->
        <GroupBox Grid.Row="1" Header="System Clock" Margin="0,0,0,15">
            <Grid Margin="10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Current system clock display -->
                <Label Content="{Binding CurrentTime, Converter={StaticResource DateTimeToStringConverter}}"
                       FontSize="18"
                       FontWeight="Bold"
                       VerticalAlignment="Center"/>

                <!-- Clock advance buttons -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="10,0,0,0">
                    <Button Content="+1 Minute" Click="AdvanceMinute_Click" Margin="2" ToolTip="Advance the system clock by one minute"/>
                    <Button Content="+1 Hour" Click="AdvanceHour_Click" Margin="2" ToolTip="Advance the system clock by one hour"/>
                    <Button Content="+1 Day" Click="AdvanceDay_Click" Margin="2" ToolTip="Advance the system clock by one day"/>
                    <Button Content="+1 Month" Click="AdvanceMonth_Click" Margin="2" ToolTip="Advance the system clock by one month (30 days)"/>
                    <Button Content="+1 Year" Click="AdvanceYear_Click" Margin="2" ToolTip="Advance the system clock by one year (365 days)"/>
                </StackPanel>
            </Grid>
        </GroupBox>

        <!-- Configuration Variables Area -->
        <!-- Allows viewing and editing system configuration parameters -->
        <GroupBox Grid.Row="2" Header="Configuration Variables" Margin="0,0,0,15">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <Grid Margin="10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="320"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- AdminId -->
                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Admin ID" Margin="0,4,0,4"/>
                    <TextBox Grid.Row="0" Grid.Column="1"
                         Text="{Binding Configuration.AdminId, UpdateSourceTrigger=PropertyChanged, ValidatesOnExceptions=True}" Margin="0,4,0,4"/>

                    <!-- AdminPassword -->
                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Admin Password" Margin="0,4,0,4"/>
                    <TextBox Grid.Row="1" Grid.Column="1"
                         Text="{Binding Configuration.AdminPassword, UpdateSourceTrigger=PropertyChanged, ValidatesOnExceptions=True}" Margin="0,4,0,4"/>

                    <!-- AvgCarSpeedKmh -->
                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Avg Car Speed (Km/h)" Margin="0,4,0,4"/>
                    <TextBox Grid.Row="2" Grid.Column="1"
                         Text="{Binding Configuration.AvgCarSpeedKmh, UpdateSourceTrigger=PropertyChanged, ValidatesOnExceptions=True}" Margin="0,4,0,4"/>

                    <!-- AvgMotorcycleSpeedKmh -->
                    <TextBlock Grid.Row="3" Grid.Column="0" Text="Avg Motorcycle Speed (Km/h)" Margin="0,4,0,4"/>
                    <TextBox Grid.Row="3" Grid.Column="1"
                         Text="{Binding Configuration.AvgMotorcycleSpeedKmh, UpdateSourceTrigger=PropertyChanged, ValidatesOnExceptions=True}" Margin="0,4,0,4"/>

                    <!-- AvgBicycleSpeedKmh -->
                    <TextBlock Grid.Row="4" Grid.Column="0" Text="Avg Bicycle Speed (Km/h)" Margin="0,4,0,4"/>
                    <TextBox Grid.Row="4" Grid.Column="1"
                         Text="{Binding Configuration.AvgBicycleSpeedKmh, UpdateSourceTrigger=PropertyChanged, ValidatesOnExceptions=True}" Margin="0,4,0,4"/>

                    <!-- AvgWalkingSpeedKmh -->
                    <TextBlock Grid.Row="5" Grid.Column="0" Text="Avg Walking Speed (Km/h)" Margin="0,4,0,4"/>
                    <TextBox Grid.Row="5" Grid.Column="1"
                         Text="{Binding Configuration.AvgWalkingSpeedKmh, UpdateSourceTrigger=PropertyChanged, ValidatesOnExceptions=True}" Margin="0,4,0,4"/>

                    <!-- MaxGeneralDeliveryDistanceKm (nullable) -->
                    <TextBlock Grid.Row="6" Grid.Column="0" Text="Max General Delivery Distance (Km)" Margin="0,4,0,4"/>
                    <TextBox Grid.Row="6" Grid.Column="1"
                         Text="{Binding Configuration.MaxGeneralDeliveryDistanceKm, Converter={StaticResource NullableDoubleConverter}, UpdateSourceTrigger=PropertyChanged, ValidatesOnExceptions=True}" Margin="0,4,0,4"/>

                    <!-- MaxDeliveryTimeSpan -->
                    <TextBlock Grid.Row="7" Grid.Column="0" Text="Max Delivery Time Span" Margin="0,4,0,4"/>
                    <TextBox Grid.Row="7" Grid.Column="1"
                         Text="{Binding Configuration.MaxDeliveryTimeSpan, Converter={StaticResource TimeSpanToStringConverter}, UpdateSourceTrigger=PropertyChanged, ValidatesOnExceptions=True}" Margin="0,4,0,4"/>

                    <!-- RiskRange -->
                    <TextBlock Grid.Row="8" Grid.Column="0" Text="Risk Range" Margin="0,4,0,4"/>
                    <TextBox Grid.Row="8" Grid.Column="1"
                         Text="{Binding Configuration.RiskRange, Converter={StaticResource TimeSpanToStringConverter}, UpdateSourceTrigger=PropertyChanged, ValidatesOnExceptions=True}" Margin="0,4,0,4"/>

                    <!-- InactivityRange -->
                    <TextBlock Grid.Row="9" Grid.Column="0" Text="Inactivity Range" Margin="0,4,0,4"/>
                    <TextBox Grid.Row="9" Grid.Column="1"
                         Text="{Binding Configuration.InactivityRange, Converter={StaticResource TimeSpanToStringConverter}, UpdateSourceTrigger=PropertyChanged, ValidatesOnExceptions=True}" Margin="0,4,0,4"/>

                    <!-- CompanyFullAddress -->
                    <TextBlock Grid.Row="10" Grid.Column="0" Text="Company Full Address" Margin="0,4,0,4"/>
                    <TextBox Grid.Row="10" Grid.Column="1"
                         Text="{Binding Configuration.CompanyFullAddress, UpdateSourceTrigger=PropertyChanged, ValidatesOnExceptions=True}" Margin="0,4,0,4"/>

                    <!-- Save Configuration Button -->
                    <Button Grid.Row="11" Grid.ColumnSpan="2" Content="Save Configuration" Width="160" Margin="0,10,0,0" HorizontalAlignment="Left" Click="SaveConfiguration_Click"/>
                </Grid>
            </ScrollViewer>
        </GroupBox>

        <!-- Action Buttons -->
        <!-- Navigation to list windows and DB management -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Center">
            <!-- Button to open the courier list window (Show, not ShowDialog) -->
            <Button Content="Courier List" Click="OpenCourierList_Click" Margin="5"/>
            <!-- Button to open the order list window (Show, not ShowDialog) -->
            <Button Content="Order List" Click="OpenOrderList_Click" Margin="5"/>
            <!-- Button to open the delivery list window (Show, not ShowDialog) -->
            <Button Content="Delivery List" Click="OpenDeliveryList_Click" Margin="5"/>
            <!-- Button to initialize the database; asks for confirmation before proceeding -->
            <Button Content="Initialize DB" Click="InitializeDb_Click" Margin="15,5,5,5"/>
            <!-- Button to reset the database; asks for confirmation before proceeding -->
            <Button Content="Reset DB" Click="ResetDb_Click" Margin="5"/>
        </StackPanel>
    </Grid>
</Window>
